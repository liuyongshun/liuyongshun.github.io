<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  <title>七月</title>
  <meta name="baidu-site-verification" content="vdMfpFtVYF">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="Smiple, 简, jian, 简博客">
  <meta name="description" content="得与失之间，是我所有的美好和思念">
<meta name="keywords" content="Smiple, 简, jian, 简博客">
<meta property="og:type" content="website">
<meta property="og:title" content="七月">
<meta property="og:url" content="http://liuyongshun.github.io/index.html">
<meta property="og:site_name" content="七月">
<meta property="og:description" content="得与失之间，是我所有的美好和思念">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="七月">
<meta name="twitter:description" content="得与失之间，是我所有的美好和思念">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

  <script></script>
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">七月</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">是七月呀</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/link">链接</a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://liuyongshun.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-webpack-react" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/10/11/webpack-react/" class="article-date">
  <time datetime="2020-10-10T20:00:00.000Z" itemprop="datePublished">2020-10-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/WEBPACK/">WEBPACK</a>►<a class="article-category-link" href="/categories/WEBPACK/webpack-react/">webpack-react</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/10/11/webpack-react/">webpack react</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="一、基础结构搭建"><a href="#一、基础结构搭建" class="headerlink" title="一、基础结构搭建"></a>一、基础结构搭建</h3><p>1、安装 node</p>
<p>2、新建一个文件，执行 npm init,初始化 package.json</p>
<p>3、搭建基础目录结构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">├── build                  // webpack 配置文件</span><br><span class="line">│   └── webpack.common.js</span><br><span class="line">├── package.json</span><br><span class="line">├── public</span><br><span class="line">│   └── index.html</span><br><span class="line">├── src</span><br><span class="line">│   ├── api</span><br><span class="line">│   ├── assets</span><br><span class="line">│   ├── components</span><br><span class="line">│   ├── config</span><br><span class="line">│   ├── pages</span><br><span class="line">│   ├── redux</span><br><span class="line">│   ├── router           // router有两种常用的形式，一种是统一维护。 react-router的v4建议采用一种是层级嵌套维护。</span><br><span class="line">│   ├── styles</span><br><span class="line">└── └── utils</span><br></pre></td></tr></table></figure>
<h3 id="二、webpack-配置"><a href="#二、webpack-配置" class="headerlink" title="二、webpack 配置"></a>二、webpack 配置</h3><p>1、安装 webpack 和 webpack-cli 脚手架。<code>webpack webpack-cli</code></p>
<p>2、另外我们需要 index.html 文件承载打包出来的 bundle.js 文件，需要安装 <code>html-webpack-plugin</code></p>
<p>3、开发环境我们需要热更新，安装<code>webpack-dev-server</code></p>
<p>4、配置 npm 命令，在 package.json 的 scripts 里配置命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// --config 是自己指定配置文件。</span><br><span class="line">// --open 是自动打开浏览器。</span><br><span class="line"></span><br><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;dev&quot;: &quot;webpack-dev-server --config build/webpack.config.js --open&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>此时的配置代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">// webpack.config.js</span><br><span class="line"></span><br><span class="line">const path = require(&apos;path&apos;)</span><br><span class="line">const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  entry: path.join(__dirname, &apos;../src/index.js&apos;),</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: &apos;bundle.js&apos;,</span><br><span class="line">    path: path.join(__dirname, &apos;../dist&apos;),</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    new HtmlWebpackPlugin(&#123;</span><br><span class="line">      filename: &apos;index.html&apos;,</span><br><span class="line">      template: &apos;public/index.html&apos;,</span><br><span class="line">      inject: true,</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    host: &apos;localhost&apos;,</span><br><span class="line">    port: 8099,</span><br><span class="line">    historyApiFallback: true, // 当使用 HTML5 History API 时，任意的 404 响应都可能需要被替代为 index.html</span><br><span class="line">    overlay: &#123;                // 错误和警告覆盖蒙版</span><br><span class="line">      errors: true,</span><br><span class="line">    &#125;,</span><br><span class="line">    inline: true,             // 行内模式将热更新代码插入到bundle内，另一种是iframe模式。</span><br><span class="line">    hot: true,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>此时目录结构</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">├── build</span><br><span class="line">│   └── webpack.config.js</span><br><span class="line">├── package.json</span><br><span class="line">├── public</span><br><span class="line">│   └── index.html</span><br><span class="line">└── src</span><br><span class="line">    ├── index.js</span><br><span class="line">    └── pages</span><br><span class="line">        └── index.js</span><br></pre></td></tr></table></figure>
<h3 id="三、react-react-router-es6-搭建"><a href="#三、react-react-router-es6-搭建" class="headerlink" title="三、react + react-router + es6 搭建"></a>三、react + react-router + es6 搭建</h3><p>1、安装 react 相关工具<code>react</code>和<code>react-dom</code></p>
<p>2、安装es6依赖</p>
<ul>
<li><p>安装 es6 工具 <code>@babel/core @babel/preset-env babel-loader</code>,</p>
</li>
<li><p>对于 react 需要安装<code>@babel/preset-react</code></p>
</li>
<li><p>动态导入<code>@babel/plugin-syntax-dynamic-import</code></p>
</li>
<li><p>class类的属性尖头函数支持 <code>@babel/plugin-proposal-class-properties</code></p>
</li>
</ul>
<p>例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class A &#123;</span><br><span class="line">  ff = () =&gt; &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>3、配置 babel.config.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  presets: [</span><br><span class="line">    &apos;@babel/preset-env&apos;,</span><br><span class="line">    &apos;@babel/preset-react&apos;</span><br><span class="line">  ],</span><br><span class="line">  plugins&apos;: [</span><br><span class="line">      &apos;@babel/plugin-syntax-dynamic-import&apos;,</span><br><span class="line">      &apos;@babel/plugin-proposal-class-properties&apos;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4、配置 webpack.config.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">module: &#123;</span><br><span class="line">   rules: [&#123;</span><br><span class="line">     test: /\.jsx?$/,</span><br><span class="line">     use: [&apos;babel-loader&apos;],</span><br><span class="line">     include: path.join(__dirname, &apos;../src&apos;)</span><br><span class="line">   &#125;]</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>5、配置最简单的页面内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// src/index.js</span><br><span class="line"></span><br><span class="line">import React from &apos;react&apos;</span><br><span class="line">import ReactDOM from &apos;react-dom&apos;</span><br><span class="line">import App from &apos;./pages/index&apos;</span><br><span class="line">ReactDOM.render(&lt;App /&gt;, document.getElementById(&apos;root&apos;))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// src/pages/index.js</span><br><span class="line"></span><br><span class="line">import React, &#123; Component &#125; from &apos;react&apos;</span><br><span class="line">class App extends Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;hello world&lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default App</span><br></pre></td></tr></table></figure>
<p><strong>操作到这里，一个简单的 react 页面已经跑起来了，但是很显然这些东西是不够的，一个完整的项目工程，还需要很多东西。如果上面的基本配置完成并且跑起了项目，那就接着往下走吧。整个流程下来，最后要实现的是完整的开发，构建打包内容，能够支撑项目的运作。</strong></p>
<h3 id="四、less-或-sass-或-stylus"><a href="#四、less-或-sass-或-stylus" class="headerlink" title="四、less 或 sass 或 stylus"></a>四、less 或 sass 或 stylus</h3><h4 id="css"><a href="#css" class="headerlink" title="css"></a>css</h4><p>1、安装依赖</p>
<ul>
<li><p><code>css-loader</code> 加载.css 文件，并转换成 js 对象</p>
</li>
<li><p><code>style-loader</code>，将样式通过 style 标签插入 head 标签内</p>
</li>
</ul>
<p>2、配置 webpack.config.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 在relus里增加如下代码。</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  test: /\.css$/,</span><br><span class="line">  use: [</span><br><span class="line">    &apos;style-loader&apos;,</span><br><span class="line">    &apos;css-loader&apos;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ps:</strong></p>
<ul>
<li><p>这里有个要注意的点，样式加载器的顺序，先 css-loader 在 style-loader</p>
</li>
<li><p>webpack 的 loader 采用了函数的 compose（组合）方式，而不是 pipe（管道），compose 方式的执行顺序是从右到左，pipe 的执行顺序是从左到右</p>
</li>
</ul>
<p>3、在 src 下新建 style 文件，然后里面新建 common.css。并且导入到 pages/index.js 页面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// src/pages/index.js</span><br><span class="line"></span><br><span class="line">import &apos;../style/common.css&apos;</span><br></pre></td></tr></table></figure>
<h4 id="less"><a href="#less" class="headerlink" title="less"></a>less</h4><p>1、假如使用 less，只需要安装<code>less 和 less-loader</code>,在 webpack.config.js 的配置中的加入下面的配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: /\.less$/,</span><br><span class="line">  use: [</span><br><span class="line">    &apos;style-loader&apos;,</span><br><span class="line">    &apos;css-loader&apos;,</span><br><span class="line">    &apos;less-loader&apos;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="sass"><a href="#sass" class="headerlink" title="sass"></a>sass</h4><p>1、假如使用 sass，需要安装<code>sass-loader node-sass</code>，在 webpack.config.js 中配置如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: /\.scss$/,</span><br><span class="line">  use: [</span><br><span class="line">    &apos;style-loader&apos;,</span><br><span class="line">    &apos;css-loader&apos;,</span><br><span class="line">    &apos;sass-loader&apos;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="stylus"><a href="#stylus" class="headerlink" title="stylus"></a>stylus</h4><p>1、假如使用 stylus，需要安装<code>stylus-loader stylus</code>，在 webpack.config.js 中配置如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: /\.styl$/,</span><br><span class="line">  use: [</span><br><span class="line">    &apos;style-loader&apos;,</span><br><span class="line">    &apos;css-loader&apos;,</span><br><span class="line">    &apos;stylus-loader&apos;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong></p>
<ul>
<li><p>less-loader 依赖于 less，有时候出现 peerDependencies WARNING less-loader@* requires a peer of less@^2.3.1 || ^3.0.0 but none was installed，自己手动安装一下 less 即可</p>
</li>
<li><p>记住：遇到 peerDependencies WARNING，什么依赖未能安装时，记得手动安装即可。或者用 yarn 更稳妥</p>
</li>
</ul>
<h4 id="五、配置图片，字体文件资源加载"><a href="#五、配置图片，字体文件资源加载" class="headerlink" title="五、配置图片，字体文件资源加载"></a>五、配置图片，字体文件资源加载</h4><p>1、字体和图片资源需要依赖 file-loader。另外还有 url-loader 可以作为解决方案，url-loader 可以处理小资源转化为 base64 格式。url-loader 依赖于 file-loader。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"> &#123;</span><br><span class="line">  test: /\.(png|svg|jpg|git)$/,</span><br><span class="line">  use: [</span><br><span class="line">    &#123;</span><br><span class="line">      loader: &apos;url-loader&apos;,</span><br><span class="line">      options: &#123;</span><br><span class="line">        limit: 10240</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  test: /\.(woff2?|eot|ttf|otf)(\?.*)?$/,</span><br><span class="line">  use: [</span><br><span class="line">    &#123;</span><br><span class="line">      loader: &apos;url-loader&apos;,</span><br><span class="line">      options: &#123;</span><br><span class="line">        limit: 10240</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="六、-文件指纹"><a href="#六、-文件指纹" class="headerlink" title="六、 文件指纹"></a>六、 文件指纹</h3><ul>
<li><p>hash： 整个项目的构建相关，只要项目文件有修改，整个项目构建 hash 就会改变</p>
</li>
<li><p>chunkhash： 不同 entry 会生成不同的 chunkhash 值</p>
</li>
<li><p>contenthash：根据文件内容来定义hash，文件内容不变，则contenthash不变;一般css会采用contenthash，js发生变化，不会导致css重新生成</p>
</li>
</ul>
<p><strong>注意：webpack 在启用 HotModuleReplacementPlugin 插件时，只能使用 hash 模式，不能使用另外两种</strong></p>
<h4 id="设置图片的指纹"><a href="#设置图片的指纹" class="headerlink" title="设置图片的指纹"></a>设置图片的指纹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// webpack.config.js  设置图片指纹。设置字体同样</span><br><span class="line">  &#123;</span><br><span class="line">    test: /\.(png|svg|jpg|git)$/,</span><br><span class="line">    use: [</span><br><span class="line">      &#123;</span><br><span class="line">        loader: &apos;url-loader&apos;,</span><br><span class="line">        options: &#123;</span><br><span class="line">          limit: 10240,</span><br><span class="line">          // hash:7 ：图片的hash采用md5生成（默认32位），7代表取前七位。ext：资源后缀名称</span><br><span class="line">          name: path.join(&apos;img/[name].[hash:8].[ext]&apos;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h4 id="css-拆分和设置-css-指纹"><a href="#css-拆分和设置-css-指纹" class="headerlink" title="css 拆分和设置 css 指纹"></a>css 拆分和设置 css 指纹</h4><p><strong>关于css拆分和内联</strong></p>
<p>css 内联：将样式内嵌到head标签，适用于小项目，css不会太多，通过内联减少 http 请求，进而提升性能，方法一<code>style-loader</code>方法二<code>html-inline-css-webpack-plugin</code></p>
<p>css 拆分：大项目例如庞大的后台系统，将所有的样式内联，太多的css反而适得其反</p>
<ul>
<li><p>拆分 css 安装依赖 <code>mini-css-extract-plugin</code>，该插件不支持 HotModuleReplacementPlugin</p>
</li>
<li><p>该插件和 style-loader 是互斥插件，将 css 拆成独立的 css 文件</p>
</li>
<li><p>同理它的loader，MiniCss.loader 跟style-loader的功能是互斥的，不能同时存在</p>
</li>
<li><p>style-loader 是将样式以 style 标签的形式插入 head</p>
</li>
</ul>
<p>webpack.config.js 配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const MiniCss = require(&apos;mini-css-extract-plugin&apos;)</span><br><span class="line"></span><br><span class="line">plugins: [</span><br><span class="line">  new MiniCss(&#123;</span><br><span class="line">    filename: &apos;[name]_[contenthash:8]&apos;</span><br><span class="line">  &#125;)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  test: /\.css$/,</span><br><span class="line">  use: [MiniCss.loader, &apos;css-loader&apos;]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  test: /\.less$/,</span><br><span class="line">  use: [MiniCss.loader, &apos;css-loader&apos;, &apos;less-loader&apos;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="构建产物的自动清理"><a href="#构建产物的自动清理" class="headerlink" title="构建产物的自动清理"></a>构建产物的自动清理</h4><p>hash 的设置，会导致 dist 内打包的东西越来越多，需要先清理dist文件</p>
<ul>
<li>安装插件 <code>clean-webpack-plugin</code>,插件会自动针对 webpack 的 output 进行清理</li>
</ul>
<p>使用：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const &#123; CleanWebpackPlugin &#125; = require(&apos;clean-webpack-plugin&apos;)</span><br><span class="line"></span><br><span class="line">plugins: [</span><br><span class="line">  new CleanWebpackPlugin()</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<h3 id="七、移动端适配"><a href="#七、移动端适配" class="headerlink" title="七、移动端适配"></a>七、移动端适配</h3><h4 id="适配尺寸"><a href="#适配尺寸" class="headerlink" title="适配尺寸"></a>适配尺寸</h4><ul>
<li>采用 px2rem-loader 和淘宝的 lib-flexible</li>
</ul>
<p>1、配置loader<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: /\.less$/,</span><br><span class="line">  use: [</span><br><span class="line">    // ...其他loader</span><br><span class="line">    &#123;</span><br><span class="line">      loader: &apos;px2rem-loader&apos;,</span><br><span class="line">      options: &#123;</span><br><span class="line">        remUnit: 75,</span><br><span class="line">        remPrecision: 8, // 小数点位数</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p>
<p>2、入口文件导入 <code>import &#39;lib-flexible&#39;</code></p>
<h4 id="适配兼容css"><a href="#适配兼容css" class="headerlink" title="适配兼容css"></a>适配兼容css</h4><p>postcss-loader + （autoprefixer 或 postcss-preset-env） 增加样式兼容</p>
<ul>
<li><p>autoprefixer 自动补全前缀，许开发者使用最新的CSS语法而不用担心浏览器兼容性</p>
</li>
<li><p>postcss-preset-env 允许开发者使用最新的CSS语法而不用担心浏览器兼容性</p>
</li>
</ul>
<p>1、 配置 webpack 的 postcss-loader<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  loader: &apos;postcss-loader&apos;,</span><br><span class="line">  options: &#123;</span><br><span class="line">    postcssOptions: &#123;</span><br><span class="line">      plugins: [</span><br><span class="line">        [</span><br><span class="line">          &apos;postcss-preset-env&apos;,</span><br><span class="line">          // &apos;autoprefixer&apos;,</span><br><span class="line">        ],</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p>
<p>2、指定package.json兼容版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;browserslist&quot;: [</span><br><span class="line">  &quot;&gt; 1%&quot;,</span><br><span class="line">  &quot;Android &gt;= 4.0&quot;,</span><br><span class="line">  &quot;not ie &lt;= 8&quot;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h3 id="八、eslint-pretter-规范代码"><a href="#八、eslint-pretter-规范代码" class="headerlink" title="八、eslint + pretter 规范代码"></a>八、eslint + pretter 规范代码</h3><ul>
<li><p>安装 eslint 相关插件 <code>eslint</code>, 可以将错误展示在termial 终端的控制台上 <code>eslint-loader</code></p>
</li>
<li><p>安装 <code>babel-eslint</code> 对Babel解析器的包装，使其能够与 ESLint 兼容</p>
</li>
<li><p>react 语法校验 <code>eslint-plugin-react</code></p>
</li>
<li><p>使用airbnb 规范 <code>eslint-config-airbnb</code></p>
</li>
<li><p>支持对ES2015+ (ES6+) import/export校验, 检测文件路径拼错或者是导入名称错误<code>eslint-plugin-import</code></p>
</li>
<li><p>该依赖包专注于检查JSX元素的可访问性，<code>eslint-plugin-jsx-a11y</code></p>
</li>
<li><p>借助webpack的配置来辅助eslint解析，最有用的就是alias，从而避免unresolved的错误<code>eslint-import-resolver-webpack</code></p>
</li>
<li><p>该插件辅助Eslint可以平滑地与Prettier一起协作,将 prettier 作为 ESLint 规范来使用 <code>eslint-plugin-prettier</code></p>
</li>
<li><p>禁用掉所有的可能与pretter冲突的格式化相关的规则<code>eslint-config-prettier</code></p>
</li>
</ul>
<p><strong>配置<code>.eslintrc.js</code>文件</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  parser: &apos;babel-eslint&apos;,</span><br><span class="line">  extends: [&apos;airbnb&apos;, &apos;prettier&apos;, &apos;plugin:prettier/recommended&apos;],</span><br><span class="line">  plugins: [&apos;prettier&apos;],</span><br><span class="line">  env: &#123;</span><br><span class="line">    browser: true,</span><br><span class="line">    node: true</span><br><span class="line">  &#125;,</span><br><span class="line">  settings: &#123;</span><br><span class="line">    // 自动发现React的版本，从而进行规范react代码</span><br><span class="line">    react: &#123;</span><br><span class="line">      pragma: &apos;React&apos;,</span><br><span class="line">      version: &apos;detect&apos;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 解决 eslint 无法解析bebpack导入的错误提示</span><br><span class="line">    &apos;import/resolver&apos;: &#123;</span><br><span class="line">      webpack: &#123;</span><br><span class="line">        config: &apos;./build/webpack.config.js&apos;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  parserOptions: &#123;</span><br><span class="line">    //指定ESLint可以解析JSX语法</span><br><span class="line">    ecmaVersion: 2019,</span><br><span class="line">    sourceType: &apos;module&apos;,</span><br><span class="line">    ecmaFeatures: &#123;</span><br><span class="line">      jsx: true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  rules: &#123;</span><br><span class="line">    &apos;react/jsx-one-expression-per-line&apos;: &apos;off&apos;, // 关闭要求一个表达式必须换行的要求，和Prettier冲突</span><br><span class="line">    &apos;react/jsx-wrap-multilines&apos;: &apos;off&apos;, // 关闭要求jsx属性中写jsx必须要加括号，和Prettier冲突</span><br><span class="line">    &apos;jsx-a11y/no-static-element-interactions&apos;: &apos;off&apos;, // 关闭非交互元素加事件必须加 role</span><br><span class="line">    &apos;jsx-a11y/click-events-have-key-events&apos;: &apos;off&apos;, // 关闭click事件要求有对应键盘事件</span><br><span class="line">    // &apos;react/jsx-filename-extension&apos;: &apos;off&apos;, // 关闭airbnb对于jsx必须写在jsx文件中的设置</span><br><span class="line">    // &apos;react/prop-types&apos;: &apos;off&apos;, // 关闭airbnb对于必须添加prop-types的校验</span><br><span class="line">    &apos;no-console&apos;: &apos;off&apos;,</span><br><span class="line">    &apos;react/jsx-props-no-spreading&apos;: &apos;off&apos;,</span><br><span class="line">    // &quot;react/jsx-filename-extension&quot;: [1, &#123; &quot;extensions&quot;: [&quot;.js&quot;, &quot;.jsx&quot;] &#125;],</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>配置.prettierrc.js</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  printWidth: 120,</span><br><span class="line">  semi: false,</span><br><span class="line">  singleQuote: true,</span><br><span class="line">  bracketSpacing: true,</span><br><span class="line">  jsxBracketSameLine: false,</span><br><span class="line">  arrowParens: &apos;avoid&apos;,</span><br><span class="line">  insertPragma: false,</span><br><span class="line">  tabWidth: 2,</span><br><span class="line">  alwaysParens: &apos;always&apos;,</span><br><span class="line">  useTabs: false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>配置 webpack.config.js</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: /\.jsx?$/,</span><br><span class="line">  use: [&apos;babel-loader&apos;, &apos;eslint-loader&apos;],</span><br><span class="line">  include: path.join(__dirname, &apos;../src&apos;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p><strong>pretter 自动格式化</strong></p>
<ul>
<li>vs code 安装 eslint 插件和 prettier-code 插件。设置如下配置。preferences —— setting —— 点击右上角的图标打开 json 文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// 保存自动格式化</span><br><span class="line">&quot;editor.formatOnSave&quot;: true,</span><br><span class="line"> &quot;eslint.run&quot;: &quot;onSave&quot;,</span><br><span class="line">    &quot;eslint.autoFixOnSave&quot;: true,</span><br><span class="line">    &quot;eslint.validate&quot;: [</span><br><span class="line">        &quot;javascript&quot;,</span><br><span class="line">        &quot;javascriptreact&quot;,</span><br><span class="line">        &quot;html&quot;,</span><br><span class="line">        &quot;vue&quot;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;language&quot;: &quot;html&quot;,</span><br><span class="line">            &quot;autoFix&quot;: true</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">    &quot;eslint.options&quot;: &#123;</span><br><span class="line">        &quot;extensions&quot;: [</span><br><span class="line">            &quot;.js&quot;,</span><br><span class="line">            &quot;.vue&quot;,</span><br><span class="line">            &quot;.jsx&quot;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>
<h3 id="九、-git-hook-校验代码提交质量"><a href="#九、-git-hook-校验代码提交质量" class="headerlink" title="九、 git hook 校验代码提交质量"></a>九、 git hook 校验代码提交质量</h3><p>配合 husky 和 lint-staged 在 git 提交时自动格式化代码</p>
<p>1、 安装依赖，<code>husky lint-staged</code></p>
<p>2、 配置 package.json</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// script 增加</span><br><span class="line"> &quot;scripts&quot;: &#123;</span><br><span class="line">   &quot;lint&quot;: &quot;eslint src --fix&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// scripts同级</span><br><span class="line"> &quot;husky&quot;: &#123;</span><br><span class="line">   &quot;hooks&quot;: &#123;</span><br><span class="line">      &quot;pre-commit&quot;: &quot;npm run lint&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p><strong>到这里基本的配置，规范什么的算是配置完成了，然后接下来是 webpack 的优化</strong></p>
<h3 id="十、webpack-构建优化项目"><a href="#十、webpack-构建优化项目" class="headerlink" title="十、webpack 构建优化项目"></a>十、webpack 构建优化项目</h3><h4 id="缩小构建目标，打包作用域"><a href="#缩小构建目标，打包作用域" class="headerlink" title="缩小构建目标，打包作用域"></a>缩小构建目标，打包作用域</h4><p>1、exclude/include 确定 loader 规则范围，减少 loader 分析</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: /\.jsx?$/,</span><br><span class="line">  use: [&apos;babel-loader&apos;],</span><br><span class="line">  include: path.join(__dirname, &apos;../src&apos;),</span><br><span class="line">  exclude: /(node_modules|bower_components)/,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2、resolve.modules 指明第三方模块的绝对路径 (减少不必要的路径分析，查找)</p>
<p>3、resolve.extensions 指定拓展名，尽可能减少后缀尝试的操作</p>
<p>4、合理使用alias，减少路径分析操作,<br>webpack 模块解释类似node。现在当前项目找，再去node_modules。因此通过别名或手动指定减少查找层级。第三方包（react，react-dom等等）都在node_modules，没必要进行路径分析。</p>
<p>5、优化resolve.mainFields配置，查找入口文件，会根据package.json去查找。直接去查找main字断减少不必要的分析过程。package.json没有main。会先找根目录下的index</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">  extensions: [&apos;.js&apos;, &apos;.jsx&apos;],</span><br><span class="line">  alias: &#123;</span><br><span class="line">    &apos;@&apos;: path.resolve(__dirname, &apos;../src/&apos;),</span><br><span class="line">    &apos;react&apos;: path.resolve(__dirname, &apos;../node_modules/react/cjs/react.production.min.js&apos;),</span><br><span class="line">    &apos;react-dom&apos;: path.resolve(__dirname, &apos;../node_modules/react-dom/cjs/react-dom.production.min.js&apos;)</span><br><span class="line">  &#125;,</span><br><span class="line">  modules: [path.resolve(__dirname, &apos;../node_modules&apos;)],</span><br><span class="line">  mainFields: [&apos;main&apos;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>6、优化 react 的引入方式(该方式会采用cdn的方式引入react，第三方cdn存在不可控因素，酌情使用)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// webpack.config.js</span><br><span class="line"></span><br><span class="line">externals: &#123;</span><br><span class="line">    react: &apos;React&apos;,</span><br><span class="line">    &apos;react-dom&apos;: &apos;ReactDOM&apos;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">// public/index.html 的 head 内增加</span><br><span class="line"></span><br><span class="line">&lt;script crossorigin src=&quot;https://unpkg.com/react@16/umd/react.development.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script crossorigin src=&quot;https://unpkg.com/react-dom@16/umd/react-dom.development.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h4 id="树摇优化-tree-shaking"><a href="#树摇优化-tree-shaking" class="headerlink" title="树摇优化 tree shaking"></a>树摇优化 tree shaking</h4><ul>
<li><p>tree shaking 会把用到的方法打到bundle。没用的方法会在uglify阶段擦除</p>
</li>
<li><p>webpack mode 的 production 默认开启</p>
</li>
</ul>
<p><strong>无用的css擦除</strong></p>
<ul>
<li>purgecss-webpack-plugin 和 mini-css-extract-plugin 和 glob 配合使用</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const PurgeCSSPlugin = require(&apos;purgecss-webpack-plugin&apos;)</span><br><span class="line">const glob = require(&apos;glob&apos;)</span><br><span class="line"></span><br><span class="line">const PATHS = &#123;</span><br><span class="line">  src: path.join(__dirname, &apos;../src&apos;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">plugins: [</span><br><span class="line">     new PurgeCSSPlugin(&#123;</span><br><span class="line">      paths: glob.sync(`$&#123;PATHS.src&#125;/**/*`,  &#123; nodir: true &#125;),</span><br><span class="line">    &#125;),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p><strong>注意：该插件会把标签选择器样式排除例如<code>body {color: red}</code>，需要手动配置排除项目</strong>更多细节参考官方文档</p>
<p><strong>也可以用 uncss</strong></p>
<h4 id="图片压缩"><a href="#图片压缩" class="headerlink" title="图片压缩"></a>图片压缩</h4><p>image-webpack-loader 配合 file-loader</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: /\.(png|svg|jpg|git)$/,</span><br><span class="line">  use: [</span><br><span class="line">    &#123;</span><br><span class="line">      loader: &apos;file-loader&apos;,</span><br><span class="line">      options: &#123;</span><br><span class="line">        limit: 10240,</span><br><span class="line">        name: path.join(&apos;img/[name][hash:8].[ext]&apos;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      loader: &apos;image-webpack-loader&apos;,</span><br><span class="line">      options: &#123;</span><br><span class="line">        // 只在 production 启用</span><br><span class="line">        disable: process.env.NODE_ENV === &apos;production&apos; ? false : true</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="多进程-多实例构建，资源并行解析方案，提升构建速度"><a href="#多进程-多实例构建，资源并行解析方案，提升构建速度" class="headerlink" title="多进程/多实例构建，资源并行解析方案，提升构建速度"></a>多进程/多实例构建，资源并行解析方案，提升构建速度</h4><ul>
<li><p>HappyPack（webpack3常用，作者维护的越来越少了）</p>
</li>
<li><p>parallel-webpack</p>
</li>
<li><p>thread-loader （webpack官方）</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: /\.jsx?$/,</span><br><span class="line">  use: [</span><br><span class="line">    &#123;</span><br><span class="line">      loader: &apos;babel-loader&apos;,</span><br><span class="line">      options: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      loader: &apos;thread-loader&apos;,</span><br><span class="line">      options: &#123;</span><br><span class="line">        workers: 2,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  include: path.join(__dirname, &apos;../src&apos;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h3 id="十一、多进程-多实例并行压缩-提升打包构建速度"><a href="#十一、多进程-多实例并行压缩-提升打包构建速度" class="headerlink" title="十一、多进程/多实例并行压缩,提升打包构建速度"></a>十一、多进程/多实例并行压缩,提升打包构建速度</h3><ul>
<li><p>parallel-uglify-plugin</p>
</li>
<li><p>uglilys-webpack-plugin（不支持es6）</p>
</li>
<li><p>terser-webpack-plugin(支持es6压缩,推荐)</p>
</li>
</ul>
<h3 id="十二、分包，预编译资源模块-externals"><a href="#十二、分包，预编译资源模块-externals" class="headerlink" title="十二、分包，预编译资源模块 externals"></a>十二、分包，预编译资源模块 externals</h3><ul>
<li><p>html-webpack-externals-plugin</p>
</li>
<li><p>DLLPlugin</p>
</li>
<li><p>webpack 的 externals 字断</p>
</li>
</ul>
<p><strong>DllPlugin</strong></p>
<ul>
<li><p>先把依赖的不变的库打包</p>
</li>
<li><p>生成 manifest.json文件</p>
</li>
<li><p>然后在webpack.config中引入</p>
</li>
</ul>
<p>1、 创建webpack.dll.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&apos;path&apos;);</span><br><span class="line">const webpack = require(&apos;webpack&apos;);</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    entry: &#123;</span><br><span class="line">        library: [</span><br><span class="line">            &apos;react&apos;,</span><br><span class="line">            &apos;react-dom&apos;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: &apos;[name]_[chunkhash].dll.js&apos;,</span><br><span class="line">        path: path.join(__dirname, &apos;../library&apos;),</span><br><span class="line">        library: &apos;[name]&apos;</span><br><span class="line">    &#125;,</span><br><span class="line">    mode: &apos;production&apos;,</span><br><span class="line">    plugins: [</span><br><span class="line">        new webpack.DllPlugin(&#123;</span><br><span class="line">            name: &apos;[name]_[hash]&apos;,</span><br><span class="line">            path: path.join(__dirname, &apos;../library/[name].json&apos;)</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>2、执行构建 <code>webpack --config build/webpack.dll.js</code></p>
<p>3、在webpack.pro.js中plugin 引入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 通过 DllReferencePlugin 对 mainfest.json引用，引入</span><br><span class="line">new webpack.DllReferencePlugin(&#123;</span><br><span class="line">  manifest: require(&apos;../library/library.json&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>注意这里需要先执行webpack –config build/webpack.dll.js，构建出预编译资源模块，之后在打包webpack生产</strong></p>
<h3 id="十三、二次构建缓存"><a href="#十三、二次构建缓存" class="headerlink" title="十三、二次构建缓存"></a>十三、二次构建缓存</h3><ul>
<li>babel-loader 缓存开启, 会在node_modules下生成.cache</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  loader: &apos;babel-loader&apos;,</span><br><span class="line">  options: &#123;</span><br><span class="line">    cacheDirectory: true</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>terser-webpack-plugin 缓存</p>
</li>
<li><p>使用cache-loader 或 hard-source-webpack-plugin 二次构建速度提升极大</p>
</li>
</ul>
<p>注意：thread-loader 和 cache-loader 兩個要一起使用，先放 cache-loader 然后 thread-loader 最後 heavy-loader</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const HardSourceWebpackPlugin = require(&apos;hard-source-webpack-plugin&apos;)</span><br><span class="line">plugins: [</span><br><span class="line">  new HardSourceWebpackPlugin(),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h3 id="十四、noParse"><a href="#十四、noParse" class="headerlink" title="十四、noParse"></a>十四、noParse</h3><p>不去解析某个库，比如（jquyer、lodash）等，这些三方库里面没有其他依赖，可以通过配置noParse不去解析文件，提高打包效率</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  module: &#123;</span><br><span class="line">    noParse: &apos;/jquery|lodash/&apos;,</span><br><span class="line">    rules:[]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="十五、压缩-css-js，html-文件"><a href="#十五、压缩-css-js，html-文件" class="headerlink" title="十五、压缩 css, js，html 文件"></a>十五、压缩 css, js，html 文件</h3><ul>
<li>css 压缩插件 <code>optimize-css-assets-webpack-plugin</code>, js 压缩插件<code>uglifyjs-webpack-plugin</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 导入</span><br><span class="line">const UglifyJsPlugin = require(&apos;uglifyjs-webpack-plugin&apos;)</span><br><span class="line">const OptimizeCSSAssetsPlugin = require(&apos;optimize-css-assets-webpack-plugin&apos;)</span><br><span class="line"></span><br><span class="line">// plugins配置</span><br><span class="line">plugins: [</span><br><span class="line">  new UglifyJsPlugin(),</span><br><span class="line">  new OptimizeCSSAssetsPlugin()</span><br><span class="line">],</span><br></pre></td></tr></table></figure>
<ul>
<li><p>uglifyjs-webpack-plugin 本身 webpack 是内置了，mode 为 production 时自动压缩，自己引入配置可以增加定制化功能</p>
</li>
<li><p>css 的压缩还有采用 optimize-css-assets-webpack-plugin + cssnano 的配置方式，cssnano基于postcss的一款功能强大的插件包，如果用了postcss建议压缩采用cssnano</p>
</li>
<li><p>cssnano：删除空格和最后一个分号；删除注释；优化字体权重；丢弃重复的样式规则；优化calc()；压缩选择器；减少手写属性；合并规则</p>
</li>
</ul>
<p><strong>html 的压缩</strong></p>
<p>上面我们在最开始用到插件<code>html-webpack-plugin</code>来处理 index.html，该插件还可以配置压缩 html，只需要简单配置即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// 完整的配置</span><br><span class="line">plugins: [</span><br><span class="line">  new HtmlWebpackPlugin(&#123;</span><br><span class="line">    filename: &apos;index.html&apos;,</span><br><span class="line">    template: &apos;public/index.html&apos;,</span><br><span class="line">    inject: true,</span><br><span class="line">    minify: &#123;</span><br><span class="line">      minifyCSS: true,</span><br><span class="line">      minifyJS: true,</span><br><span class="line">      html5: true,</span><br><span class="line">      collapseWhitespace: true,</span><br><span class="line">      preserveLineBreaks: true,</span><br><span class="line">      removeComments: true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h4 id="十六、提取公共页面资源-代码分隔"><a href="#十六、提取公共页面资源-代码分隔" class="headerlink" title="十六、提取公共页面资源, 代码分隔"></a>十六、提取公共页面资源, 代码分隔</h4><ul>
<li><p>webpack 4内置的 SplitChunksPlugin 进行公共脚本分离，例如多个页面使用 moment 或 axios 等插件，可以将其抽离出来</p>
</li>
<li><p>可以解决多页面MPA，导致的代码重复问题</p>
</li>
</ul>
<p>chunks:</p>
<ul>
<li><p>async: 异步引入库分离 import(xxx)</p>
</li>
<li><p>initial: 同步引入库分离 import xxx</p>
</li>
<li><p>all: 全部分离</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">optimization: &#123;</span><br><span class="line">  splitChunks: &#123;</span><br><span class="line">    minSize: 0,</span><br><span class="line">    cacheGroups: &#123;</span><br><span class="line">      commons: &#123;</span><br><span class="line">        name: &apos;commons&apos;,</span><br><span class="line">        chunks: &apos;all&apos;,</span><br><span class="line">        minChunks: 2,         // 被几处文件公用，超过一处就提取</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="十七、懒加载js"><a href="#十七、懒加载js" class="headerlink" title="十七、懒加载js"></a>十七、懒加载js</h3><p>1、commonJS 的 require.ensure</p>
<p>2、ES6 动态加载（es6原生不支持，babel转码），安装依赖<code>@babel/plugin-syntax-dynamic-import</code></p>
<p>在 babel.config.js 的配置里导入相应插件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plugins: [&apos;@babel/plugin-syntax-dynamic-import&apos;]</span><br></pre></td></tr></table></figure>
<p>3、使用， 使用动态后，打包会生产单独的 js 文件</p>
<p>import()传入一个模块路径，返回一个Promise，如果模块被成功解析则调用resolve回调，否则调用reject回调。resolve回调的返回值取决于目标模块的导出方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import(&apos;../dynamic.jsx&apos;).then(res =&gt; &#123;</span><br><span class="line">  this.setState(&#123;</span><br><span class="line">    Text: res.default</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>4、配合React.lazy() 和 React.Suspense 实现路由代码分隔</p>
<p>实际使用中，可以依据业务租组件的复杂度决定是否使用懒加载，一般来说路由的懒加载是有必要的</p>
<p>4.1 命名导出，通常在webpack.config.js文件中通过output.chunkFilename字段来指定动态模块的文件名。如果缺省该参数，则以filename的命名方式命名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">output: &#123;</span><br><span class="line">  path:path.resolve(__dirname,&quot;dist&quot;),</span><br><span class="line">  filename: &quot;[name].[contenthash:8].js&quot;,</span><br><span class="line">  chunkFilename: &apos;[name].bundle.js&apos;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4.2 通过以注释的形式为import()方法指定chunk的name</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 最终该模块的文件名就是button.bundle.js</span><br><span class="line">const Button = React.lazy(()=&gt;import(/*webpackChunkName:&quot;button&quot;*/&quot;../button.js&quot;));</span><br></pre></td></tr></table></figure>
<p>4.3 必须搭配 Suspense 才能正常渲染</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Suspense &#125; from &apos;react&apos;</span><br><span class="line">&lt;Suspense fallback=&#123;&lt;div&gt;Loading...&lt;/div&gt;&#125;&gt;</span><br><span class="line">  &lt;Switch&gt;</span><br><span class="line">    &lt;Route</span><br><span class="line">      path=&quot;/&quot;</span><br><span class="line">      component=&#123;props =&gt; &#123;</span><br><span class="line">        return &lt;Main &#123;...props&#125; /&gt;</span><br><span class="line">      &#125;&#125;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/Switch&gt;</span><br><span class="line">&lt;/Suspense&gt;</span><br></pre></td></tr></table></figure>
<h3 id="开发环境优化"><a href="#开发环境优化" class="headerlink" title="开发环境优化"></a>开发环境优化</h3><h4 id="webpack-dev-middleware"><a href="#webpack-dev-middleware" class="headerlink" title="webpack-dev-middleware"></a>webpack-dev-middleware</h4><p><strong>为什么要使用？</strong></p>
<p>webpack 的 watch mode 虽然能监听文件的变更，并且自动打包，但是每次打包后的结果将会存储到本地硬盘中，而 IO 操作是非常耗资源时间的，无法满足本地开发调试需求</p>
<p>而 webpack-dev-middleware 拥有以下几点特性：</p>
<ul>
<li><p>以 watch mode 启动 webpack，监听的资源一旦发生变更，便会自动编译，生产最新的 bundle</p>
</li>
<li><p>在编译期间，停止提供旧版的 bundle 并且将请求延迟到最新的编译结果完成之后</p>
</li>
<li><p>webpack 编译后的资源会存储在内存中，当用户请求资源时，直接于内存中查找对应资源，减少去硬盘中查找的 IO 操作耗时</p>
</li>
</ul>
<p>使用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">const express = require(&apos;express&apos;)</span><br><span class="line">const webpack = require(&apos;webpack&apos;)</span><br><span class="line">const chalk = require(&apos;chalk&apos;)  // 控制台颜色插件</span><br><span class="line">const webpackDevMiddleware = require(&apos;webpack-dev-middleware&apos;)</span><br><span class="line"></span><br><span class="line">const app = express()</span><br><span class="line">const config = require(&apos;./webpack.config.js&apos;)</span><br><span class="line">const compiler = webpack(config)</span><br><span class="line"></span><br><span class="line">app.use(webpackDevMiddleware(compiler, &#123;</span><br><span class="line">  publicPath: config.output.publicPath, // 加载打包构建的 dist 目录</span><br><span class="line">  logTime: true,</span><br><span class="line">  stats: &apos;errors-warnings&apos;</span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line">const getIPAddress = () =&gt; &#123;</span><br><span class="line">  var interfaces = require(&apos;os&apos;).networkInterfaces()</span><br><span class="line">  for (var devName in interfaces) &#123;</span><br><span class="line">    var iface = interfaces[devName]</span><br><span class="line">    for (var i=0; i &lt; iface.length; i++) &#123;</span><br><span class="line">      var alias = iface[i]</span><br><span class="line">      if (alias.family === &apos;IPv4&apos; &amp;&amp; alias.address !== &apos;127.0.0.1&apos; &amp;&amp; !alias.internal) &#123;</span><br><span class="line">        return alias.address</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 获取 ip 将地址打印在控制台</span><br><span class="line">const LOCAL_IP = getIPAddress()</span><br><span class="line"></span><br><span class="line">app.listen(8899, () =&gt; &#123;</span><br><span class="line">  console.log(chalk.yellow(&apos;http://localhost:8899&apos;))</span><br><span class="line">  console.log(chalk.blue(`http://$&#123;LOCAL_IP&#125;:8899`))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="同样可以，-开启多核压缩-terser-webpack-plugin"><a href="#同样可以，-开启多核压缩-terser-webpack-plugin" class="headerlink" title="同样可以， 开启多核压缩 terser-webpack-plugin"></a>同样可以， 开启多核压缩 terser-webpack-plugin</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const TerserPlugin = require(&apos;terser-webpack-plugin&apos;)</span><br><span class="line">module.exports = &#123;</span><br><span class="line">    optimization: &#123;</span><br><span class="line">        minimizer: [</span><br><span class="line">            new TerserPlugin(&#123;</span><br><span class="line">                parallel: true,</span><br><span class="line">                terserOptions: &#123;</span><br><span class="line">                    ecma: 6,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;),</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="监控面板-speed-measure-webpack-plugin-（开发阶段不分析构建速度时没必要打开）"><a href="#监控面板-speed-measure-webpack-plugin-（开发阶段不分析构建速度时没必要打开）" class="headerlink" title="监控面板 speed-measure-webpack-plugin ,（开发阶段不分析构建速度时没必要打开）"></a>监控面板 speed-measure-webpack-plugin ,（开发阶段不分析构建速度时没必要打开）</h4><h4 id="开启一个通知面板-webpack-build-notifier-（提升体验）"><a href="#开启一个通知面板-webpack-build-notifier-（提升体验）" class="headerlink" title="开启一个通知面板 webpack-build-notifier （提升体验）"></a>开启一个通知面板 webpack-build-notifier （提升体验）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// webpack.config.js文件</span><br><span class="line">const WebpackBuildNotifierPlugin = require(&apos;webpack-build-notifier&apos;);</span><br><span class="line">const webpackConfig= &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">        new WebpackBuildNotifierPlugin(&#123;</span><br><span class="line">            title: &apos;mine&apos;,</span><br><span class="line">            suppressSuccess: true</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="开启打包进度-progress-bar-webpack-plugin-提升体验，但是我居然觉得变快了"><a href="#开启打包进度-progress-bar-webpack-plugin-提升体验，但是我居然觉得变快了" class="headerlink" title="开启打包进度 progress-bar-webpack-plugin (提升体验，但是我居然觉得变快了)"></a>开启打包进度 progress-bar-webpack-plugin (提升体验，但是我居然觉得变快了)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// webpack.config.js文件</span><br><span class="line">const ProgressBarPlugin = require(&apos;progress-bar-webpack-plugin&apos;);</span><br><span class="line">const webpackConfig= &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">        new ProgressBarPlugin(),</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="开发面板更清晰-webpack-dashboard-（webapck-dev-server-使用静默模式，避免太杂乱，devServer-quiet-true-）"><a href="#开发面板更清晰-webpack-dashboard-（webapck-dev-server-使用静默模式，避免太杂乱，devServer-quiet-true-）" class="headerlink" title="开发面板更清晰 webpack-dashboard （webapck dev server 使用静默模式，避免太杂乱，devServer: {quiet: true}）"></a>开发面板更清晰 webpack-dashboard （webapck dev server 使用静默模式，避免太杂乱，devServer: {quiet: true}）</h4><p>不做性能分析，没必要用它，反而是 webpack quiet 模式更好</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// webpack.config.js文件</span><br><span class="line">const DashboardPlugin = require(&apos;webpack-dashboard/plugin&apos;);</span><br><span class="line">const webpackConfig= &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">        new DashboardPlugin()</span><br><span class="line">        ]</span><br><span class="line">&#125;</span><br><span class="line">// package.json文件</span><br><span class="line">&#123;</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;devdash&quot;: &quot;webpack-dashboard -- webpack-dev-server --config build/webpack.config.js&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>之前：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;dev&quot;: &quot;node index.js&quot;,</span><br><span class="line">    &quot;dev&quot;: &quot;webpack-dev-server&quot;,</span><br><span class="line">    &quot;dev&quot;: &quot;webpack&quot;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>之后：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;dev&quot;: &quot;webpack-dashboard -- node index.js&quot;,</span><br><span class="line">    &quot;dev&quot;: &quot;webpack-dashboard -- webpack-dev-server&quot;,</span><br><span class="line">    &quot;dev&quot;: &quot;webpack-dashboard -- webpack&quot;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="webpack性能分析"><a href="#webpack性能分析" class="headerlink" title="webpack性能分析"></a>webpack性能分析</h3><h4 id="十八、speed-measure-webpack-plugin-分析-loader-和插件的执行时间"><a href="#十八、speed-measure-webpack-plugin-分析-loader-和插件的执行时间" class="headerlink" title="十八、speed-measure-webpack-plugin 分析 loader 和插件的执行时间"></a>十八、speed-measure-webpack-plugin 分析 loader 和插件的执行时间</h4><p>使用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const SpeedMeasure = require(&apos;speed-measure-webpack-plugin&apos;)</span><br><span class="line">const smp = new SpeedMeasure()</span><br><span class="line">const webpackConfig = &#123;</span><br><span class="line">  entry: &apos;index.js&apos;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: &apos;index.js&apos;,</span><br><span class="line">    path: path.join(__dirname, &apos;../dist&apos;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">module.exports = smp.wrap(webpackConfig)</span><br></pre></td></tr></table></figure>
<h4 id="十九、webpack-bundle-analyzer-分析bundle体积大小"><a href="#十九、webpack-bundle-analyzer-分析bundle体积大小" class="headerlink" title="十九、webpack-bundle-analyzer 分析bundle体积大小"></a>十九、webpack-bundle-analyzer 分析bundle体积大小</h4><p>使用：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const WebpackBundleAnalyzer = require(&apos;webpack-bundle-analyzer&apos;).BundleAnalyzerPlugin</span><br><span class="line">plugins: [</span><br><span class="line">    new WebpackBundleAnalyzer(),</span><br><span class="line">  ]</span><br></pre></td></tr></table></figure></p>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><h4 id="解决-airbnb-配置-eslint-不识别-webpack-路径别名-eslint-import-resolver-webpack"><a href="#解决-airbnb-配置-eslint-不识别-webpack-路径别名-eslint-import-resolver-webpack" class="headerlink" title="解决 airbnb 配置 eslint 不识别 webpack 路径别名 eslint-import-resolver-webpack"></a>解决 airbnb 配置 eslint 不识别 webpack 路径别名 <code>eslint-import-resolver-webpack</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// eslintrc.js</span><br><span class="line">settings: &#123;</span><br><span class="line">    &apos;import/resolver&apos;: &#123;</span><br><span class="line">      webpack: &#123;</span><br><span class="line">        config: &apos;./build/webpack.config.js&apos;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h4 id="babel-插件解释"><a href="#babel-插件解释" class="headerlink" title="babel 插件解释"></a>babel 插件解释</h4><ul>
<li>@babel/preset-react jsx语法糖的支持。始终包含以下插件：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@ babel / plugin-syntax-jsx</span><br><span class="line">@ babel / plugin-transform-react-jsx</span><br><span class="line">@ babel / plugin-transform-react-display-name</span><br></pre></td></tr></table></figure>
<ul>
<li><p>@babel/preset-env，是一个智能的babel预设, 让你能使用最新的JavaScript语法, 它会帮你转换成代码的目标运行环境支持的语法</p>
</li>
<li><p>@babel/plugin-proposal-class-properties类属性提案，如果使用尖头函数需要使用该插件</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class Main extends PureComponent &#123;</span><br><span class="line">  // 尖头</span><br><span class="line">  dd = () =&gt; &#123;&#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;333&lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="eslint-错误提示"><a href="#eslint-错误提示" class="headerlink" title="eslint 错误提示"></a>eslint 错误提示</h4><ul>
<li><p>friendly-errors-webpack-plugin 将 eslint 的错误展示到浏览器,并生成遮罩层</p>
</li>
<li><p>eslint-loader 将错误输出到终端</p>
</li>
</ul>
<h4 id="source-map"><a href="#source-map" class="headerlink" title="source-map"></a>source-map</h4><ul>
<li><p>dev 环境开启 source-map 功能，方便调试</p>
</li>
<li><p>生产环境关闭，线上排查可以将 source-map 上传监控</p>
</li>
</ul>
<p>source-map:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">devtool: &apos;source-map&apos;</span><br></pre></td></tr></table></figure>
<h4 id="less-变量全局引入"><a href="#less-变量全局引入" class="headerlink" title="less 变量全局引入"></a>less 变量全局引入</h4><p>采用 style-resources-loader</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">// 完整的less配置</span><br><span class="line">&#123;</span><br><span class="line">  test: /\.less$/,</span><br><span class="line">  use: [</span><br><span class="line">    MiniCssExtractPlugin.loader,</span><br><span class="line">    &apos;css-loader&apos;,</span><br><span class="line">    &#123;</span><br><span class="line">      loader: &apos;postcss-loader&apos;,</span><br><span class="line">      options: &#123;</span><br><span class="line">        postcssOptions: &#123;</span><br><span class="line">          plugins: [</span><br><span class="line">            [</span><br><span class="line">              &apos;autoprefixer&apos;,</span><br><span class="line">            ],</span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      loader: &apos;px2rem-loader&apos;,</span><br><span class="line">      options: &#123;</span><br><span class="line">        remUnit: 75,</span><br><span class="line">        remPrecision: 8,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    &apos;less-loader&apos;,</span><br><span class="line">    &#123;</span><br><span class="line">      loader: &apos;style-resources-loader&apos;,</span><br><span class="line">      options: &#123;</span><br><span class="line">          patterns: [</span><br><span class="line">            path.join(__dirname, &apos;../src/style/variable.less&apos;)</span><br><span class="line">          ],</span><br><span class="line">          injector: &apos;append&apos;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h4 id="browserslist"><a href="#browserslist" class="headerlink" title="browserslist"></a>browserslist</h4><ul>
<li>是在不同的前端工具之间共用目标浏览器和 node 版本的配置工具。它主要被以下工具使用</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Autoprefixer</span><br><span class="line">Babel</span><br><span class="line">post-preset-env</span><br><span class="line">eslint-plugin-compat</span><br><span class="line">stylelint-unsupported-browser-features</span><br><span class="line">postcss-normalize</span><br></pre></td></tr></table></figure>
<ul>
<li><p>安装 <code>npm i browserslist</code></p>
</li>
<li><p>package.json 里面增加如下配置</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;browserslist&quot;: [</span><br><span class="line">  &quot;&gt; 1%&quot;,</span><br><span class="line">  &quot;Android &gt;= 4.0&quot;,</span><br><span class="line">  &quot;not ie &lt;= 8&quot;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<ul>
<li>或者使用文件 <code>.browserslistrc</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 注释</span><br><span class="line">&gt; 1%</span><br><span class="line">Android &gt;= 4.0</span><br><span class="line">not ie &lt;= 8</span><br></pre></td></tr></table></figure>
<p><strong>文件查询策略</strong></p>
<ul>
<li><p>当前目录或者上级目录的browserslist配置文件</p>
</li>
<li><p>当前目录或者上级目录的browserslistrc配置文件</p>
</li>
<li><p>当前目录或者上级目录的package.json配置文件里面的browserslist配置项（推荐）</p>
</li>
<li><p>如果上述的配置文件缺失或者其他因素导致未能生成有效的配置，browserslist 将使用默认配置&gt; 0.5%, last 2 versions, Firefox ESR, not dead</p>
</li>
</ul>
<h4 id="stats"><a href="#stats" class="headerlink" title="stats"></a>stats</h4><p><a href="https://webpack.docschina.org/configuration/stats/" target="_blank" rel="noopener">选项让你更精确地控制 bundle 信息该怎么显示</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuyongshun.github.io/2020/10/11/webpack-react/" data-id="ckgzax7ss00bo2vcudh8n7npx" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/">webpack</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/70/">70</a><a class="extend next" rel="next" href="/page/2/">下一页</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/DEV/">DEV</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/DEV/trouble/">trouble</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/ES6/">ES6</a><span class="category-list-count">14</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/ES6/array/">array</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ES6/async/">async</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ES6/class/">class</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ES6/decorate/">decorate</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ES6/export-import/">export&import</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ES6/fuction/">fuction</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ES6/generator/">generator</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ES6/object/">object</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ES6/promise/">promise</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ES6/proxy/">proxy</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ES6/reflect/">reflect</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ES6/set-map/">set&map</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ES6/string/">string</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ES6/variable-deconstruction/">variable&deconstruction</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/FLUTTER/">FLUTTER</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/FLUTTER/dart/">dart</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/FLUTTER/env/">env</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/H5/">H5</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/H5/h5-history/">h5 history</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/H5/h5-video/">h5 video</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTML-CSS/">HTML & CSS</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HTML-CSS/HTML-CSS/">HTML & CSS</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/HYBRID/">HYBRID</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HYBRID/hybrid/">hybrid</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/JS/">JS</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/JS/FP/">FP</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JS/algorithm/">algorithm</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JS/algorithm2/">algorithm2</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JS/base/">base</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JS/data-constructor/">data constructor</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JS/principle/">principle</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/NODE/">NODE</a><span class="category-list-count">11</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/NODE/express/">express</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/NODE/module/">module</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/NODE/mongo/">mongo</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/NODE/mongoCommand/">mongoCommand</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/NODE/mongoOprate/">mongoOprate</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/NODE/mongoodb/">mongoodb</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/NODE/node-api/">node api</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/NODE/node-buffer/">node buffer</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/NODE/node-eventloop/">node eventloop</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/NODE/node-stream/">node stream</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/NODE/variable/">variable</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/NPM/">NPM</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/NPM/cli/">cli</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/NPM/npm-package/">npm package</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/PLAY/">PLAY</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/PLAY/photo/">photo</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/REACT/">REACT</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/REACT/hook/">hook</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/REACT/react/">react</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/REACT/redux/">redux</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/TOOL/">TOOL</a><span class="category-list-count">10</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/TOOL/chrome/">chrome</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TOOL/chrome-perf/">chrome-perf</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TOOL/debug/">debug</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TOOL/frequently/">frequently</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TOOL/git/">git</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TOOL/mac/">mac</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TOOL/nginx/">nginx</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TOOL/vscode-plugin/">vscode plugin</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/TS/">TS</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/TS/ts-base/">ts base</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/VUE/">VUE</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/VUE/principle/">principle</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/VUE/vueRouter/">vueRouter</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/WEB/">WEB</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/WEB/web/">web</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/WEBPACK/">WEBPACK</a><span class="category-list-count">4</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/WEBPACK/ast/">ast</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/WEBPACK/plugin/">plugin</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/WEBPACK/webpack-react/">webpack-react</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/WEBPACK/webpackDescription/">webpackDescription</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/WEEX/">WEEX</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/WEEX/use/">use</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/WEEX/weex/">weex</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/performance/">performance</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/performance/performance/">performance</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/performance/time-slice/">time slice</a><span class="category-list-count">1</span></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/DEV/">DEV</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ES6/">ES6</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/H5/">H5</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/">HTML</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HYBRID/">HYBRID</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS/">JS</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NPM/">NPM</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/REACT/">REACT</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TS/">TS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cli/">cli</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/">es6</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flutter/">flutter</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mac/">mac</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/">node</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/performance/">performance</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/play/">play</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tool/">tool</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/variable/">variable</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vscode/">vscode</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/">vue</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/weex/">weex</a><span class="tag-list-count">2</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/DEV/" style="font-size: 10px;">DEV</a> <a href="/tags/ES6/" style="font-size: 11.43px;">ES6</a> <a href="/tags/H5/" style="font-size: 11.43px;">H5</a> <a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/HYBRID/" style="font-size: 10px;">HYBRID</a> <a href="/tags/JS/" style="font-size: 15.71px;">JS</a> <a href="/tags/NPM/" style="font-size: 11.43px;">NPM</a> <a href="/tags/REACT/" style="font-size: 12.86px;">REACT</a> <a href="/tags/TS/" style="font-size: 10px;">TS</a> <a href="/tags/cli/" style="font-size: 10px;">cli</a> <a href="/tags/es6/" style="font-size: 20px;">es6</a> <a href="/tags/flutter/" style="font-size: 11.43px;">flutter</a> <a href="/tags/mac/" style="font-size: 10px;">mac</a> <a href="/tags/nginx/" style="font-size: 10px;">nginx</a> <a href="/tags/node/" style="font-size: 18.57px;">node</a> <a href="/tags/performance/" style="font-size: 12.86px;">performance</a> <a href="/tags/play/" style="font-size: 10px;">play</a> <a href="/tags/tool/" style="font-size: 17.14px;">tool</a> <a href="/tags/variable/" style="font-size: 10px;">variable</a> <a href="/tags/vscode/" style="font-size: 10px;">vscode</a> <a href="/tags/vue/" style="font-size: 11.43px;">vue</a> <a href="/tags/webpack/" style="font-size: 14.29px;">webpack</a> <a href="/tags/weex/" style="font-size: 11.43px;">weex</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a><span class="archive-list-count">4</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/10/11/webpack-react/">webpack react</a>
          </li>
        
          <li>
            <a href="/2020/08/11/ts-base/">ts base</a>
          </li>
        
          <li>
            <a href="/2020/07/20/performance-time-split/">time slice</a>
          </li>
        
          <li>
            <a href="/2020/06/19/AST/">AST</a>
          </li>
        
          <li>
            <a href="/2020/06/19/REACT-hook/">hook</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <ul class="hobby-outer">
      <li class="hobby-item"><a href="http://blog.csdn.net/liuyongshun2/article">CSDN</a></li>
      <li class="hobby-item"><a href="https://github.com/liuyongshun">GITHUB</a></li>
    </ul>
    <div id="footer-info" class="inner">
      &copy; 2020 cheat&nbsp;
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1274642270'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1274642270%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</script>



    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/link" class="mobile-nav-link">链接</a>
  
</nav>
    

<script src="https://code.jquery.com/jquery-latest.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

<div id="totop">
  <a title="javascript:;">返回<br>顶部</a>
</div>
<script src="/js/totop.js"></script>

  </div>
</body>
</html>